[gd_scene load_steps=39 format=3 uid="uid://du7hvqupd72eh"]

[ext_resource type="Script" path="res://Scripts/Enemies/shield_enemy_charger.gd" id="1_7d0i4"]
[ext_resource type="Texture2D" uid="uid://b3bwcq37g5jv6" path="res://Sprites/Tiles/Tile2.png" id="2_tqnoh"]
[ext_resource type="Texture2D" uid="uid://dr8fvxm582nds" path="res://Sprites/Player/maleBase/base/base_dark8.png" id="3_86b41"]
[ext_resource type="Texture2D" uid="uid://dojr0tf8krxln" path="res://Sprites/Player/maleBase/base/base_dark9.png" id="4_ou86f"]
[ext_resource type="Texture2D" uid="uid://cabchjotgjwd2" path="res://Sprites/Player/maleBase/base/base_dark10.png" id="5_1o1y2"]
[ext_resource type="Texture2D" uid="uid://b606ix5vt7h6a" path="res://Sprites/Player/maleBase/base/char1.png" id="6_djcdi"]
[ext_resource type="Texture2D" uid="uid://jqhysk0tda26" path="res://Sprites/Player/maleBase/base/char18.png" id="7_hy3ce"]
[ext_resource type="Texture2D" uid="uid://ci6b1iisoasmh" path="res://Sprites/Player/maleBase/base/char2.png" id="8_w7yoi"]
[ext_resource type="Texture2D" uid="uid://qpvy7nerblwc" path="res://Sprites/Player/maleBase/base/char3.png" id="9_2ewv0"]
[ext_resource type="Texture2D" uid="uid://c04l0adjdaivd" path="res://Sprites/Player/maleBase/base/char4.png" id="10_p0u15"]
[ext_resource type="Texture2D" uid="uid://dcuqd52omdmog" path="res://Sprites/Player/maleBase/base/char5.png" id="11_l0o65"]
[ext_resource type="Texture2D" uid="uid://cdihgtxj33d5x" path="res://Sprites/Player/maleBase/base/char7.png" id="12_afalq"]
[ext_resource type="Texture2D" uid="uid://rw61ggynusn7" path="res://Sprites/Player/maleBase/base/char6.png" id="13_47rs6"]
[ext_resource type="Texture2D" uid="uid://bbsi6ewqrw0li" path="res://Sprites/Explosion/Explosion.png" id="14_2ofb3"]
[ext_resource type="AudioStream" uid="uid://d1hc6qoyrjlkt" path="res://Sounds/Explosions/despawn_explosion.wav" id="20_kv5o8"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_xmtb7"]
size = Vector2(18, 40)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_gss8k"]
size = Vector2(24.3077, 50)

[sub_resource type="SpriteFrames" id="SpriteFrames_7quab"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("3_86b41")
}, {
"duration": 1.0,
"texture": ExtResource("4_ou86f")
}, {
"duration": 1.0,
"texture": ExtResource("5_1o1y2")
}],
"loop": false,
"name": &"death",
"speed": 15.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("6_djcdi")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("7_hy3ce")
}],
"loop": true,
"name": &"jump",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": ExtResource("8_w7yoi")
}, {
"duration": 1.0,
"texture": ExtResource("9_2ewv0")
}, {
"duration": 1.0,
"texture": ExtResource("10_p0u15")
}, {
"duration": 1.0,
"texture": ExtResource("11_l0o65")
}, {
"duration": 1.0,
"texture": ExtResource("12_afalq")
}, {
"duration": 1.0,
"texture": ExtResource("13_47rs6")
}],
"loop": true,
"name": &"walk",
"speed": 8.0
}]

[sub_resource type="AtlasTexture" id="AtlasTexture_mr44o"]
atlas = ExtResource("14_2ofb3")
region = Rect2(0, 0, 96, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_1bjpn"]
atlas = ExtResource("14_2ofb3")
region = Rect2(96, 0, 96, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_tn4x3"]
atlas = ExtResource("14_2ofb3")
region = Rect2(192, 0, 96, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_7emwe"]
atlas = ExtResource("14_2ofb3")
region = Rect2(288, 0, 96, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_ihov7"]
atlas = ExtResource("14_2ofb3")
region = Rect2(384, 0, 96, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_ac7cd"]
atlas = ExtResource("14_2ofb3")
region = Rect2(480, 0, 96, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_v60gn"]
atlas = ExtResource("14_2ofb3")
region = Rect2(576, 0, 96, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_uxlpd"]
atlas = ExtResource("14_2ofb3")
region = Rect2(672, 0, 96, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_i68hx"]
atlas = ExtResource("14_2ofb3")
region = Rect2(768, 0, 96, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_w2oi7"]
atlas = ExtResource("14_2ofb3")
region = Rect2(864, 0, 96, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_dfv4j"]
atlas = ExtResource("14_2ofb3")
region = Rect2(960, 0, 96, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_4xurp"]
atlas = ExtResource("14_2ofb3")
region = Rect2(1056, 0, 96, 96)

[sub_resource type="SpriteFrames" id="SpriteFrames_ahjkr"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_mr44o")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1bjpn")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_tn4x3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7emwe")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ihov7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ac7cd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_v60gn")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_uxlpd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_i68hx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_w2oi7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dfv4j")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4xurp")
}],
"loop": false,
"name": &"default",
"speed": 16.0
}]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_kdqwi"]
height = 80.0

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_ndgb0"]
radius = 5.26316
height = 41.9615

[sub_resource type="RectangleShape2D" id="RectangleShape2D_vh2oe"]
size = Vector2(20.7143, 37.0463)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_knqub"]
size = Vector2(36.6705, 46.3925)

[sub_resource type="SegmentShape2D" id="SegmentShape2D_7g28x"]
b = Vector2(-15, 40)

[sub_resource type="SegmentShape2D" id="SegmentShape2D_jnimy"]
b = Vector2(15, 40)

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_m43r0"]

[node name="ChargingShieldEnemy" type="CharacterBody2D" groups=["enemies"]]
scale = Vector2(2.5, 2.5)
collision_layer = 0
script = ExtResource("1_7d0i4")

[node name="CollisionBox" type="CollisionShape2D" parent="."]
position = Vector2(0, 11)
scale = Vector2(0.6, 1)
shape = SubResource("RectangleShape2D_xmtb7")

[node name="Shield" type="StaticBody2D" parent="."]
position = Vector2(0, 11)
collision_layer = 0
collision_mask = 0

[node name="Sprite2D" type="Sprite2D" parent="Shield"]
visible = false
modulate = Color(0.662745, 0.172549, 0.74902, 1)
position = Vector2(13, 1)
scale = Vector2(0.279999, 1.2)
texture = ExtResource("2_tqnoh")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Shield"]
position = Vector2(13, 1)
scale = Vector2(0.377079, 0.782559)
shape = SubResource("RectangleShape2D_gss8k")
disabled = true

[node name="ShieldArea" type="Area2D" parent="Shield"]
position = Vector2(13, 1)
scale = Vector2(0.580037, 0.536284)
collision_layer = 0
collision_mask = 2
monitoring = false
monitorable = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="Shield/ShieldArea"]
position = Vector2(-1.90735e-06, 0)
scale = Vector2(0.697079, 1.44349)
shape = SubResource("RectangleShape2D_gss8k")

[node name="EnemySprite" type="AnimatedSprite2D" parent="."]
modulate = Color(1, 0.458824, 0.458824, 1)
sprite_frames = SubResource("SpriteFrames_7quab")
animation = &"death"
autoplay = "walk"

[node name="ExplosionSprite" type="AnimatedSprite2D" parent="."]
visible = false
modulate = Color(0, 0, 0, 1)
position = Vector2(0, 16)
sprite_frames = SubResource("SpriteFrames_ahjkr")

[node name="NavigationAgent" type="NavigationAgent2D" parent="."]
path_desired_distance = 200.0
target_desired_distance = 100.0
debug_enabled = true

[node name="TurnAroundTimer" type="Timer" parent="."]
wait_time = 0.5
one_shot = true

[node name="MoveTimer" type="Timer" parent="."]
wait_time = 0.5
autostart = true

[node name="AttackTimer" type="Timer" parent="."]
one_shot = true

[node name="KnockbackTimer" type="Timer" parent="."]
wait_time = 0.3
one_shot = true

[node name="TurnToPlayerTimer" type="Timer" parent="."]
one_shot = true

[node name="ChargeTimeout" type="Timer" parent="."]
wait_time = 5.0
one_shot = true
autostart = true

[node name="ChargeDuration" type="Timer" parent="."]
wait_time = 2.0
one_shot = true

[node name="Hurtbox" type="Area2D" parent="."]
visible = false
position = Vector2(-1.19209e-07, 11)
scale = Vector2(0.6, 0.56)
collision_layer = 4
collision_mask = 0

[node name="HurtboxShape" type="CollisionShape2D" parent="Hurtbox"]
scale = Vector2(0.640001, 1)
shape = SubResource("CapsuleShape2D_kdqwi")

[node name="Hitbox" type="Area2D" parent="."]
visible = false
monitorable = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="Hitbox"]
position = Vector2(6, 11)
scale = Vector2(2.51538, 1.04)
shape = SubResource("CapsuleShape2D_ndgb0")

[node name="WallCheck" type="Area2D" parent="."]
visible = false
position = Vector2(0, 11)
collision_layer = 0
collision_mask = 8

[node name="Shape" type="CollisionShape2D" parent="WallCheck"]
position = Vector2(16, -1)
scale = Vector2(0.850026, 0.64196)
shape = SubResource("RectangleShape2D_vh2oe")

[node name="PlayerCheck" type="Area2D" parent="."]
monitorable = false

[node name="Shape" type="CollisionShape2D" parent="PlayerCheck"]
position = Vector2(95.2209, 11)
scale = Vector2(6.5, 1.8)
shape = SubResource("RectangleShape2D_knqub")

[node name="LedgeCheckLeft" type="Area2D" parent="."]
visible = false
collision_layer = 8
collision_mask = 8

[node name="Left" type="CollisionShape2D" parent="LedgeCheckLeft"]
shape = SubResource("SegmentShape2D_7g28x")

[node name="LedgeCheckRight" type="Area2D" parent="."]
visible = false
collision_layer = 8
collision_mask = 8

[node name="Right" type="CollisionShape2D" parent="LedgeCheckRight"]
shape = SubResource("SegmentShape2D_jnimy")

[node name="ChaseArea" type="Area2D" parent="."]
visible = false
monitorable = false

[node name="ChaseCollisionBox" type="CollisionShape2D" parent="ChaseArea"]
position = Vector2(0, 12)
scale = Vector2(34.4, 6.87257)
shape = SubResource("CapsuleShape2D_m43r0")

[node name="DeathTimer" type="Timer" parent="."]
one_shot = true

[node name="DespawnSound2D" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("20_kv5o8")

[connection signal="body_entered" from="Shield/ShieldArea" to="." method="_on_shield_area_body_entered"]
[connection signal="animation_finished" from="ExplosionSprite" to="." method="_on_explosion_sprite_animation_finished"]
[connection signal="timeout" from="TurnAroundTimer" to="." method="_on_turn_around_timer_timeout"]
[connection signal="timeout" from="MoveTimer" to="." method="_on_move_timer_timeout"]
[connection signal="timeout" from="KnockbackTimer" to="." method="_on_knockback_timer_timeout"]
[connection signal="timeout" from="TurnToPlayerTimer" to="." method="_on_turn_to_player_timer_timeout"]
[connection signal="timeout" from="ChargeDuration" to="." method="_on_charge_duration_timeout"]
[connection signal="body_entered" from="Hurtbox" to="." method="_on_hurtbox_body_entered"]
[connection signal="body_entered" from="Hitbox" to="." method="_on_hitbox_body_entered"]
[connection signal="body_entered" from="WallCheck" to="." method="_on_wall_check_body_entered"]
[connection signal="body_entered" from="PlayerCheck" to="." method="_on_player_check_body_entered"]
[connection signal="body_exited" from="LedgeCheckLeft" to="." method="_on_ledge_check_left_body_exited"]
[connection signal="body_exited" from="LedgeCheckRight" to="." method="_on_ledge_check_right_body_exited"]
[connection signal="body_exited" from="ChaseArea" to="." method="_on_chase_area_body_exited"]
[connection signal="timeout" from="DeathTimer" to="." method="_on_death_timer_timeout"]
